<html>
    <head>
        <title>2D Sandbox</title>
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script src="js/lang/lexer.js"></script>
        <script src="js/lang/parser.js"></script>
        <script>
            // let test = 
            // `x = 3
            // print x`;
            
            // let lexer = new Lexer(test);
            // console.log(lexer.lex()); 
            
            window.onload = function () {
                console.log('test!');
                document.getElementById('tokenize').addEventListener('click', () => {
                    let code = document.getElementById('input').value;
    
                    let lexer = new Lexer(code);
    
                    let output = lexer.lex();
                    let text = Lexer.printTokens(output);
                    document.getElementById('output').value = text;
                });

                document.getElementById('parse').addEventListener('click', () => {
                    let code = document.getElementById('input').value;

                    let lexer = new Lexer(code);
                    let tokens = lexer.lex();

                    let parser = new Parser(tokens);
                    let output = parser.parse();
                    let text = Parser.printSyntaxTree(output);
                    document.getElementById('output').value = text;
                });
            }
        </script>
        
        <script src="//cdn.jsdelivr.net/npm/phaser@3.17.0/dist/phaser.js"></script>
        <script src="js/sandbox/app.js"></script>
    </head>

    <body>
        <div class="game">
            <div id="sandbox"></div>
            <div class="panel">
                <textarea id="input"></textarea>
                <div class="buttons">
                    <button id="tokenize">Tokenize</button>
                    <button id="parse">Parse</button>
                </div>
                <textarea id="output" disabled></textarea>
            </div>
        </div>
    </body>
</html>